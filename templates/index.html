<!DOCTYPE html>
<html>
<head>
    <title>Flask Chatbot</title>
    <style>
        body { 
            font-family: Arial;
            background: #f4f4f4;
        }
        #chatbox {
            background: white; 
            padding-top: 10px;
            padding-bottom: 10px; 
            border-radius: 5px;
            position:fixed;
            display: flex;
            justify-content: center;
            width: 100vw;
        }
        .message, input, button, .Hello{
            font-size:large;
        }
        .Hello{
            margin: 20px;
            margin-left: 30px;
        }
        .message { 
            margin: 5px 0;
            padding-left: 30px;
            
            font-size: 22px;
        }
        .page{
            overflow-y: scroll;
            width: calc(100vw-20px); 
            height: 80vh;
            
        }
        input{
            justify-content: left;
            height: 35px;
            width: 75vw;

        }
        button{
            width: 15vw;
        }
        .user { color: blue; }
        .bot { color: green; }
        #header{
            font-size:50px;
            text-align: center;
            padding: 10px;
            font-weight: 700;
            position:sticky;
            left: calc(50w - 100px);
        }
    </style>
</head>
<body>
    <div id="header" class="bot">Sentiment Analysis</div>
    <div class="page">
        <div class="Hello bot">Hello there, Enter your message</div>

        <div id="messages"></div>
    </div>
    <div id="chatbox">
        <input type="text", id="userInput", placeholder="Type a message..." />
        <button onclick="sendMessage()", id="send">Send</button>
    </div>

    <script>
        function sendMessage() {
            let input = document.getElementById("userInput");
            let message = input.value.trim();
            
            if (!message) return;
            let s="";
            addMessage("You: " + message, "user");
            input.value = "";

            fetch("/get", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message: message})
            })
            .then(res => res.json())
            .then(data => addMessage("Bot: " + data.reply, "bot"))
            .catch(err => addMessage("Error: " + err, "bot"));
        }

        document.getElementById("userInput").addEventListener("keypress",(e)=>{
                //console.log(e.key)
                if(e.key==="Enter"){
                    sendMessage();
                }
            });


        function addMessage(text, cls) {
            let msgDiv = document.createElement("div");
            msgDiv.className = "message " + cls;
            msgDiv.textContent = text;
            document.getElementById("messages").appendChild(msgDiv);
            if(cls=="bot"){
                let brk=document.createElement("br");

                document.getElementById("messages").appendChild(brk);   

            }
        }

        

    </script>
</body>
</html>
